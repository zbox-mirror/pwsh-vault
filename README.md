# Windows PowerShell Vault

Скрипт для переноса и сохранения файлов в Vault (директорию хранилища), с сохранением структуры исходной директории. Может на входе принимать различные параметры фильтрации исходных файлов.

## Параметры

- `SRC` | `Source`  
  Путь к исходной директории. По умолчанию: `$($PSScriptRoot)\Source`.
- `DST` | `Destination` | `Vault`  
  Путь к директории назначения. По умолчанию: `$($PSScriptRoot)\Vault`.
- `CT` | `CreationTime` | `Create`  
  Время создания файла (в секундах). По умолчанию: `5270400` (61 день и более).
- `WT` | `LastWriteTime` | `Modify`  
  Время модификации файла (в секундах). По умолчанию: `5270400` (61 день и более).
- `FS` | `FileSize` | `Size`  
  Исходный размер файла. Файлы, соответствующего размера и более, будут добавлены в фильтр для подготовке к переносу. Может принимать значения `*kb`, `*mb`, `*gb`, `*tb` и `*pb` (где `*` - число). По умолчанию: `0kb` и более.
- `FE` | `Exclude`  
  Путь и название файла и исключениями. По умолчанию: `$($PSScriptRoot)\Vault.Exclude.txt`.
- `LOG` | `Logs`  
  Путь к директории с журналами выполнения скрипта. По умолчанию: `$($PSScriptRoot)\Logs`.
- `SD` | `SaveData` | `Save`  
  Полное сохранение данных в Vault. Файлы с одинаковыми именами в Vault перед перезаписью будут архивированы с меткой времени выполнения скрипта. По умолчанию: `false`.
- `DM` | `DemoMode` | `Demo`  
  Режим "ДЕМО". Скрипт будет выполнять свою работу, но без влияния на исходную директорию, все файлы и папки в исходной директории будут сохранены. По умолчанию: `false`.

## Синтаксис

```
.\Vault.ps1 -SRC 'C:\Data' -DST 'C:\Vault'
```

1. Сканировать директорию `C:\Data` на файлы.
  - Время создания и изменения 61 день (и более).
2. Переместить отобранные файлы в директорию `C:\Vault` с сохранением исходной структуры.

```
.\Vault.ps1 -SRC 'C:\Data' -DST 'C:\Vault' -CT '864000' -WT '864000'
```

1. Сканировать директорию `C:\Data` на файлы.
  - Время создания и изменения 10 дней (и более).
2. Переместить отобранные файлы в директорию `C:\Vault` с сохранением исходной структуры.

```
.\Vault.ps1 -SRC 'C:\Data' -DST 'C:\Vault' -CT '864000' -WT '864000' -FS '32mb'
```

1. Сканировать директорию `C:\Data` на файлы.
  - Время создания и изменения 10 дней (и более).
  - Размер 32 мегабайта (и более).
2. Переместить отобранные файлы в директорию `C:\Vault` с сохранением исходной структуры.

```
.\Vault.ps1 -SRC 'C:\Data' -DST 'C:\Vault' -CT '864000' -WT '864000' -SD
```

1. Сканировать директорию `C:\Data` на файлы.
  - Время создания и изменения 10 дней (и более).
2. Переместить отобранные файлы в директорию `C:\Vault` с сохранением исходной структуры.
  - Архивировать существующие подобные файлы в Vault с последующей перезаписью их исходников.
